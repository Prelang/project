#!/bin/zsh

_target=$1

# Prefer project/
if [[ -d project/ ]] ; then
  _target_script=project/$_target

# Fallback to bin/
else
  _target_script=bin/$_target
fi

if [[ -z $_target ]] ; then
  echo "fatal: no target passed"
  exit 1
fi

# If the target script exists and is executable, execute it with the arguments
# passed to "project" after the target argument (i.e., $1).
if [[ -x $_target_script ]] ; then
  shift
  ./$_target_script $*

# Otherwise, fail.
else
  echo "fatal: Target '$_target' was not found or is not executable."
  exit 1
fi

